<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOMM e.V. BI-Tool Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e6f2ed; /* Hintergrundfarbe angepasst */
            transition: background-color 0.3s;
        }
        body.dark-mode {
            background-color: #333;
            color: #fff;
        }
        .header {
            background-color: #44997c; /* Header-Farbe angepasst */
            color: #fff;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }
        .header img {
            height: 40px;
        }
        .sidebar {
            width: 200px;
            background-color: #44997c; /* Sidebar-Farbe angepasst */
            color: #fff;
            position: fixed;
            top: 60px;
            bottom: 40px;
            overflow: auto;
        }
        .sidebar a {
            display: flex;
            align-items: center;
            color: #fff;
            padding: 15px;
            text-decoration: none;
        }
        .sidebar a i {
            margin-right: 10px;
        }
        .sidebar a:hover {
            background-color: #388a6b; /* Sidebar Hover-Farbe angepasst */
        }
        .content {
            margin-left: 210px;
            padding: 80px 20px 60px;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        .content.dark-mode {
            background-color: #444;
            color: #fff;
        }
        .dashboard {
            display: flex;
            flex-wrap: wrap;
        }
        .dashboard .card {
            background-color: #fff;
            margin: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1 1 calc(33% - 40px);
            position: relative;
            transition: background-color 0.3s, color 0.3s;
        }
        .dashboard .card.dark-mode {
            background-color: #555;
            color: #fff;
        }
        .card .export {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
        .card .export-options {
            display: none;
            position: absolute;
            top: 30px;
            right: 10px;
            background: white;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        .card .export-options button {
            display: block;
            width: 100%;
            padding: 10px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
        }
        .card .export-options button:hover {
            background: #f4f4f4;
        }
        .footer {
            background-color: #44997c; /* Footer-Farbe angepasst */
            color: #fff;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hidden {
            display: none;
        }
        .teams {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .team {
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, color 0.3s;
        }
        .team.dark-mode {
            background-color: #555;
            color: #fff;
        }
        .team h3 {
            margin-top: 0;
        }
        .team p {
            margin: 5px 0;
        }
        .filter-bar {
            margin-bottom: 20px;
        }
        .filter-bar select, .filter-bar input {
            margin-right: 10px;
        }
        .table-container {
            margin-top: 20px;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        table.dark-mode {
            background-color: #555;
            color: #fff;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            transition: background-color 0.3s, color 0.3s;
        }
        th.dark-mode {
            background-color: #666;
            color: #fff;
        }
        .button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
            border: 2px solid #000;
            background: #fff;
            color: #000;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            transition: background 0.4s, color 0.4s;
        }
        .button:hover {
            background: #000;
            color: #fff;
        }
        .button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: #000;
            transition: all 0.6s ease-in-out;
            transform: translate(-50%, -50%) rotate(45deg);
            z-index: 0;
        }
        .button:hover::before {
            width: 100%;
            height: 100%;
        }
        .button span {
            position: relative;
            z-index: 1;
        }
        .button-new {
            padding: 1.3em 3em;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            font-weight: 500;
            color: #000;
            background-color: #fff;
            border: none;
            border-radius: 45px;
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease 0s;
            cursor: pointer;
            outline: none;
        }
        .button-new:hover {
            background-color: #23c483;
            box-shadow: 0px 15px 20px rgba(46, 229, 157, 0.4);
            color: #fff;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            visibility: hidden; /* Hide the toggle switch */
        }
        .toggle-switch input {
            display: none;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4CAF50;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .loader {
            border: 8px solid #f3f3f3;
            border-radius: 50%;
            border-top: 8px solid #3498db;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .expandable {
            cursor: pointer;
        }
        .extra-info {
            display: none;
            background-color: #f9f9f9;
        }
        .extra-info.dark-mode {
            background-color: #666;
        }
        .list-view .teams {
            display: block;
        }
        .list-view .team {
            display: block;
            width: 100%;
            margin-bottom: 20px;
        }
        .profile-dropdown {
            position: relative;
            display: inline-block;
        }
        .profile-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }
        .profile-dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .profile-dropdown-content a:hover {
            background-color: #ddd;
        }
        .profile-dropdown-content p {
            margin: 0;
            padding: 12px 16px;
            background-color: #f1f1f1;
            color: #000;
            font-weight: bold;
        }
        .profile-dropdown:hover .profile-dropdown-content {
            display: block;
        }
        .profile-button {
            border: none;
            background: none;
            cursor: pointer;
            margin-right: 20px;
        }
        .profile-button img {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            object-fit: cover;
        }
        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .nav-arrows i {
            cursor: pointer;
            font-size: 24px;
        }
        .quarter-select-container {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
    </style>
</head>
<body onload="setDefaultPersonalzahlen()">

<div class="header">
    <img src="KOMM_Label_140.png" alt="KOMM e.V. Logo">
    <h1>KOMM e.V. BI-Tool Dashboard</h1>
    <div class="profile-dropdown">
        <button class="profile-button"><img src="9453886.png" alt="Profilbild"></button>
        <div class="profile-dropdown-content">
            <p>Angemeldet als: Martin Weinß</p>
            <a href="#">Profilinformationen</a>
            <a href="#" onclick="openAdminTool()">Admin Tool</a>
            <a href="#">Einstellungen</a>
            <a href="#" onclick="logout()">Abmelden</a>
        </div>
    </div>
</div>

<div class="sidebar">
    <a href="#" onclick="showSection('dashboard')"><i class="fa fa-tachometer"></i> Dashboard</a>
    <a href="#" onclick="showSection('reports')"><i class="fa fa-file-text"></i> Berichte</a>
    <a href="#" onclick="showSection('logs')"><i class="fa fa-list-alt"></i> Protokolle</a>
    <a href="#" onclick="showSection('teams')"><i class="fa fa-users"></i> Teams & Mitarbeiter</a>
    <a href="#" onclick="showSection('notifications')"><i class="fa fa-bell"></i> Benachrichtigungen</a>
    <a href="#" onclick="showSection('settings')"><i class="fa fa-cogs"></i> Einstellungen</a>
</div>

<div class="content">
    <div id="dashboard" class="section">
        <h2>Übersicht</h2>
        <div class="dashboard">
            <div class="card" id="personalzahlen-card">
                <h3>Personalzahlen</h3>
                <img id="personalzahlen-image" src="2024q3.png" alt="Personalzahlen">
                <p>Anzahl der Mitarbeiter, Krankmeldungen, Fluktuationsrate und weitere wichtige Kennzahlen.</p>
                <div class="quarter-select-container">
                    <select id="quarter-select" onchange="updatePersonalzahlenImage()">
                        <option value="2023q1">2023 Q1</option>
                        <option value="2023q2">2023 Q2</option>
                        <option value="2023q3">2023 Q3</option>
                        <option value="2023q4">2023 Q4</option>
                        <option value="2024q1">2024 Q1</option>
                        <option value="2024q2">2024 Q2</option>
                        <option value="2024q3" selected>2024 Q3</option>
                    </select>
                </div>
                <div class="export" onclick="toggleExportOptions(this)">
                    <i class="fa fa-download"></i>
                </div>
                <div class="export-options">
                    <button onclick="exportData('xlsx')">Excel (.xlsx)</button>
                    <button onclick="exportData('pdf')">PDF</button>
                    <button onclick="exportData('png')">PNG</button>
                    <button onclick="exportData('ppt')">PowerPoint</button>
                </div>
            </div>
            <div class="card" id="performance-card">
                <div id="performance-content">
                    <h3>Leistungskennzahlen</h3>
                    <img src="Leistungskennzahlen.jpeg" alt="Leistungskennzahlen">
                    <p>Erbrachte Leistungen, Pflegebesuche, durchschnittliche Besuchszeiten und mehr.</p>
                </div>
                <div id="order-content" class="hidden">
                    <h3>Auftragsanalysen</h3>
                    <img src="Auftragsanalyse.jpg" alt="Auftragsanalysen">
                    <p>Analyse der Aufträge, Auftraggeber, Ausführungszeiten und regionale Verteilung.</p>
                </div>
                <div class="nav-arrows">
                    <i class="fa fa-chevron-left" onclick="showPreviousContent()"></i>
                    <i class="fa fa-chevron-right" onclick="showNextContent()"></i>
                </div>
                <div class="export" onclick="toggleExportOptions(this)">
                    <i class="fa fa-download"></i>
                </div>
                <div class="export-options">
                    <button onclick="exportData('xlsx')">Excel (.xlsx)</button>
                    <button onclick="exportData('pdf')">PDF</button>
                    <button onclick="exportData('png')">PNG</button>
                    <button onclick="exportData('ppt')">PowerPoint</button>
                </div>
            </div>
            <div class="card">
                <h3>Optimierter Stellenplan - SOLL</h3>
                <img src="Stellenplan.jpg" alt="Stellenplan">
                <p>Der optimierte Stellenplan</p>
                <div class="export" onclick="toggleExportOptions(this)">
                    <i class="fa fa-download"></i>
                </div>
                <div class="export-options">
                    <button onclick="exportData('xlsx')">Excel (.xlsx)</button>
                    <button onclick="exportData('pdf')">PDF</button>
                    <button onclick="exportData('png')">PNG</button>
                    <button onclick="exportData('ppt')">PowerPoint</button>
                </div>
            </div>
        </div>
    </div>

    <div id="reports" class="section hidden">
        <h2>Berichte</h2>
        <p>Hier können Sie Berichte erstellen und anzeigen. Wählen Sie einen der folgenden Berichte aus:</p>
        <ul>
            <li><a href="#">Monatsbericht Personal</a></li>
            <li><a href="#">Quartalsbericht Leistungen</a></li>
            <li><a href="#">Jahresbericht Finanzen</a></li>
        </ul>
    </div>

    <div id="logs" class="section hidden">
        <h2>Protokolle</h2>
        <p>Hier finden Sie Systemprotokolle und Ereignisprotokolle.</p>
        <ul>
            <li><a href="#">Systemprotokoll 01/2024</a></li>
            <li><a href="#">Ereignisprotokoll 02/2024</a></li>
            <li><a href="#">Wartungsprotokoll 03/2024</a></li>
        </ul>
    </div>

    <div id="teams" class="section hidden">
        <h2>Teams & Mitarbeiter</h2>
        <div class="filter-bar">
            <label for="team-filter">Filter nach Team:</label>
            <select id="team-filter" name="team-filter" onchange="filterTeams()">
                <option value="all">Alle Teams</option>
                <option value="team1">TuP Team 1</option>
                <option value="team2">TuP Team 2</option>
                <option value="team3">TuP Team 3</option>
                <option value="team4">TuP Team 4</option>
                <!-- Weitere Teams hier -->
            </select>
            <label for="employee-filter">Filter nach Mitarbeiter:</label>
            <input type="text" id="employee-filter" name="employee-filter" onkeyup="filterEmployees()" placeholder="Name eingeben">
            <button class="button-new" onclick="resetFilters()"><span>Filter zurücksetzen</span></button>
            <label for="view-switch" class="hidden">Ansicht wechseln:</label>
            <div class="toggle-switch">
                <input type="checkbox" id="view-switch" onclick="toggleView()">
                <span class="slider"></span>
            </div>
        </div>
        <div class="teams" id="teams-container">
            <div class="team" data-team="team1">
                <h3>TuP Team 1</h3>
                <p>Leiter: Max Mustermann</p>
                <p>Anzahl Mitarbeiter: 3</p>
                <p>FTE: 3.0</p>
                <p>Mitarbeiter: Anna Müller, Peter Schmidt, Laura Becker</p>
            </div>
            <div class="team" data-team="team2">
                <h3>TuP Team 2</h3>
                <p>Leiter: John Doe</p>
                <p>Anzahl Mitarbeiter: 3</p>
                <p>FTE: 2.5</p>
                <p>Mitarbeiter: Maria Hoffmann, Jens Klein, Sophie Bauer</p>
            </div>
            <div class="team" data-team="team3">
                <h3>TuP Team 3</h3>
                <p>Leiter: Erika Mustermann</p>
                <p>Anzahl Mitarbeiter: 3</p>
                <p>FTE: 2.8</p>
                <p>Mitarbeiter: Michael Müller, Franz Schmidt, Lisa Becker</p>
            </div>
            <div class="team" data-team="team4">
                <h3>TuP Team 4</h3>
                <p>Leiter: Robert Mustermann</p>
                <p>Anzahl Mitarbeiter: 3</p>
                <p>FTE: 2.9</p>
                <p>Mitarbeiter: Emily Müller, Paul Schmidt, Sarah Becker</p>
            </div>
            <!-- Weitere Teams und Mitarbeiter hier -->
        </div>
        <div class="table-container">
            <h2>Mitarbeiter</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Team</th>
                    </tr>
                </thead>
                <tbody id="employee-table-body">
                    <tr class="expandable" data-team="team1" onclick="toggleDetails(this)">
                        <td>Anna Müller</td>
                        <td>Pflegekraft</td>
                        <td>TuP Team 1</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 01.01.1980<br>
                            <strong>Alter:</strong> 44<br>
                            <strong>Qualifikation:</strong> Krankenpflegerin<br>
                            <strong>Berufserfahrung:</strong> 10 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.02.2014<br>
                            <strong>Übrige Urlaubstage:</strong> 15<br>
                            <strong>Nettoarbeitszeit:</strong> 26 Stunden<br>
                            <strong>Gehalt & TG:</strong> E7, Stufe 5, 3.748,49 € brutto<br>
                            <strong>Auslastungswert:</strong> 65%<br>
                            <strong>Personalnummer:</strong> 5110<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team1" onclick="toggleDetails(this)">
                        <td>Peter Schmidt</td>
                        <td>Pflegekraft</td>
                        <td>TuP Team 1</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 05.05.1985<br>
                            <strong>Alter:</strong> 39<br>
                            <strong>Qualifikation:</strong> Krankenpfleger<br>
                            <strong>Berufserfahrung:</strong> 8 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.03.2016<br>
                            <strong>Übrige Urlaubstage:</strong> 20<br>
                            <strong>Nettoarbeitszeit:</strong> 30 Stunden<br>
                            <strong>Gehalt & TG:</strong> E6, Stufe 4, 3.507,92 € brutto<br>
                            <strong>Auslastungswert:</strong> 60%<br>
                            <strong>Personalnummer:</strong> 5187<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team2" onclick="toggleDetails(this)">
                        <td>Maria Hoffmann</td>
                        <td>Verwaltung</td>
                        <td>TuP Team 2</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 10.10.1990<br>
                            <strong>Alter:</strong> 33<br>
                            <strong>Qualifikation:</strong> Betriebswirtin<br>
                            <strong>Berufserfahrung:</strong> 5 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.04.2019<br>
                            <strong>Übrige Urlaubstage:</strong> 10<br>
                            <strong>Nettoarbeitszeit:</strong> 28 Stunden<br>
                            <strong>Gehalt & TG:</strong> E9, Stufe 3, 3.628,68 € brutto<br>
                            <strong>Auslastungswert:</strong> 55%<br>
                            <strong>Personalnummer:</strong> 5094<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team2" onclick="toggleDetails(this)">
                        <td>Jens Klein</td>
                        <td>Verwaltung</td>
                        <td>TuP Team 2</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 15.07.1987<br>
                            <strong>Alter:</strong> 37<br>
                            <strong>Qualifikation:</strong> Betriebswirt<br>
                            <strong>Berufserfahrung:</strong> 7 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.06.2017<br>
                            <strong>Übrige Urlaubstage:</strong> 12<br>
                            <strong>Nettoarbeitszeit:</strong> 32 Stunden<br>
                            <strong>Gehalt & TG:</strong> E8, Stufe 4, 3.770,54 € brutto<br>
                            <strong>Auslastungswert:</strong> 70%<br>
                            <strong>Personalnummer:</strong> 5021<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team3" onclick="toggleDetails(this)">
                        <td>Michael Müller</td>
                        <td>Reinigung</td>
                        <td>TuP Team 3</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 20.09.1985<br>
                            <strong>Alter:</strong> 38<br>
                            <strong>Qualifikation:</strong> Reinigungskraft<br>
                            <strong>Berufserfahrung:</strong> 6 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.08.2018<br>
                            <strong>Übrige Urlaubstage:</strong> 8<br>
                            <strong>Nettoarbeitszeit:</strong> 29 Stunden<br>
                            <strong>Gehalt & TG:</strong> E5, Stufe 2, 3.236,55 € brutto<br>
                            <strong>Auslastungswert:</strong> 50%<br>
                            <strong>Personalnummer:</strong> 5168<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team4" onclick="toggleDetails(this)">
                        <td>Emily Müller</td>
                        <td>Fahrer</td>
                        <td>TuP Team 4</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 22.12.1992<br>
                            <strong>Alter:</strong> 31<br>
                            <strong>Qualifikation:</strong> Fahrer<br>
                            <strong>Berufserfahrung:</strong> 4 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.09.2020<br>
                            <strong>Übrige Urlaubstage:</strong> 9<br>
                            <strong>Nettoarbeitszeit:</strong> 27 Stunden<br>
                            <strong>Gehalt & TG:</strong> E4, Stufe 1, 2.928,99 € brutto<br>
                            <strong>Auslastungswert:</strong> 45%<br>
                            <strong>Personalnummer:</strong> 5193<br>
                        </td>
                    </tr>
                    <tr class="expandable" data-team="team4" onclick="toggleDetails(this)">
                        <td>Paul Schmidt</td>
                        <td>Fahrer</td>
                        <td>TuP Team 4</td>
                    </tr>
                    <tr class="extra-info">
                        <td colspan="3">
                            <strong>Geburtsdatum:</strong> 30.11.1980<br>
                            <strong>Alter:</strong> 43<br>
                            <strong>Qualifikation:</strong> Fahrer<br>
                            <strong>Berufserfahrung:</strong> 10 Jahre<br>
                            <strong>Einstiegsdatum:</strong> 01.01.2014<br>
                            <strong>Übrige Urlaubstage:</strong> 15<br>
                            <strong>Nettoarbeitszeit:</strong> 25 Stunden<br>
                            <strong>Gehalt & TG:</strong> E5, Stufe 3, 3.372,94 € brutto<br>
                            <strong>Auslastungswert:</strong> 65%<br>
                            <strong>Personalnummer:</strong> 5142<br>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="notifications" class="section hidden">
        <h2>Benachrichtigungen</h2>
        <p>Hier werden Benachrichtigungen angezeigt.</p>
        <ul>
            <li>Neue Pflegekraft eingestellt</li>
            <li>Systemwartung geplant für den 15.07.2024</li>
            <li>Monatsbericht Personal verfügbar</li>
        </ul>
    </div>

    <div id="settings" class="section hidden">
        <h2>Einstellungen</h2>
        <p>Hier können Sie die Einstellungen des BI-Tools konfigurieren:</p>
        <form id="settings-form">
            <label for="language">Sprache:</label>
            <select id="language" name="language">
                <option value="de">Deutsch</option>
                <option value="en">Englisch</option>
            </select>
            <br><br>
            <label for="theme">Theme:</label>
            <select id="theme" name="theme">
                <option value="light">Hell</option>
                <option value="dark">Dunkel</option>
            </select>
            <br><br>
            <button type="button" class="button-new" onclick="saveSettings()"><span>Speichern</span></button>
        </form>
    </div>
</div>

<div class="footer">
    <p>&copy; 2024 KOMM e.V. Alle Rechte vorbehalten.</p>
</div>

<script>
    function showSection(sectionId) {
        const sections = document.querySelectorAll('.section');
        sections.forEach(section => {
            section.classList.add('hidden');
        });
        document.getElementById(sectionId).classList.remove('hidden');
    }

    function filterTeams() {
        const filter = document.getElementById('team-filter').value;
        const teams = document.querySelectorAll('.team');
        teams.forEach(team => {
            if (filter === 'all' || team.getAttribute('data-team') === filter) {
                team.style.display = 'block';
            } else {
                team.style.display = 'none';
            }
        });
        filterEmployees();
    }

    function filterEmployees() {
        const filter = document.getElementById('team-filter').value;
        const search = document.getElementById('employee-filter').value.toLowerCase();
        const rows = document.querySelectorAll('#employee-table-body .expandable');
        rows.forEach(row => {
            const team = row.getAttribute('data-team');
            const text = row.textContent.toLowerCase();
            if ((filter === 'all' || team === filter) && text.includes(search)) {
                row.style.display = 'table-row';
                row.nextElementSibling.style.display = 'none';
            } else {
                row.style.display = 'none';
                row.nextElementSibling.style.display = 'none';
            }
        });
    }

    function resetFilters() {
        document.getElementById('team-filter').value = 'all';
        document.getElementById('employee-filter').value = '';
        filterTeams();
    }

    function toggleDetails(row) {
        const nextRow = row.nextElementSibling;
        if (nextRow && nextRow.classList.contains('extra-info')) {
            nextRow.style.display = nextRow.style.display === 'table-row' ? 'none' : 'table-row';
        }
    }

    function toggleView() {
        const teamsContainer = document.getElementById('teams-container');
        teamsContainer.classList.toggle('list-view');
    }

    function toggleExportOptions(element) {
        const options = element.nextElementSibling;
        options.style.display = options.style.display === 'block' ? 'none' : 'block';
    }

    function exportData(format) {
        alert('Exportiere als ' + format);
    }

    document.addEventListener('click', function(event) {
        const exportOptions = document.querySelectorAll('.export-options');
        exportOptions.forEach(options => {
            if (!options.contains(event.target) && !options.previousElementSibling.contains(event.target)) {
                options.style.display = 'none';
            }
        });
    });

    function openAdminTool() {
        alert('Admin Tool öffnen'); // Hier den Code für das Admin Tool hinzufügen
    }

    function saveSettings() {
        const theme = document.getElementById('theme').value;
        const lang = document.getElementById('language').value;
        
        toggleTheme(theme);
        setLanguage(lang);
    }

    function toggleTheme(theme) {
        const body = document.body;
        const content = document.querySelector('.content');
        const cards = document.querySelectorAll('.card');
        const teams = document.querySelectorAll('.team');
        const extraInfo = document.querySelectorAll('.extra-info');
        const tables = document.querySelectorAll('table');
        const tableHeaders = document.querySelectorAll('th');

        if (theme === 'dark') {
            body.classList.add('dark-mode');
            content.classList.add('dark-mode');
            cards.forEach(card => card.classList.add('dark-mode'));
            teams.forEach(team => team.classList.add('dark-mode'));
            extraInfo.forEach(info => info.classList.add('dark-mode'));
            tables.forEach(table => table.classList.add('dark-mode'));
            tableHeaders.forEach(header => header.classList.add('dark-mode'));
        } else {
            body.classList.remove('dark-mode');
            content.classList.remove('dark-mode');
            cards.forEach(card => card.classList.remove('dark-mode'));
            teams.forEach(team => team.classList.remove('dark-mode'));
            extraInfo.forEach(info => info.classList.remove('dark-mode'));
            tables.forEach(table => table.classList.remove('dark-mode'));
            tableHeaders.forEach(header => header.classList.remove('dark-mode'));
        }
    }

    function setLanguage(lang) {
        if (lang === 'en') {
            document.querySelector('h1').textContent = 'KOMM e.V. BI-Tool Dashboard';
            document.querySelectorAll('.sidebar a').forEach((link, index) => {
                const englishText = ['Dashboard', 'Reports', 'Logs', 'Teams & Employees', 'Notifications', 'Settings'];
                link.innerHTML = `<i class="${link.firstChild.className}"></i> ${englishText[index]}`;
            });
            document.querySelector('h2').textContent = 'Overview';
            document.querySelectorAll('h3').forEach((heading, index) => {
                const englishHeadings = ['Staff Numbers', 'Performance Metrics', 'Order Analyses'];
                if (englishHeadings[index]) heading.textContent = englishHeadings[index];
            });
            document.querySelector('label[for="team-filter"]').textContent = 'Filter by Team:';
            document.querySelector('label[for="employee-filter"]').textContent = 'Filter by Employee:';
            document.querySelector('.button-new span').textContent = 'Reset Filters';
            document.querySelectorAll('.section.hidden ul li a').forEach((link, index) => {
                const englishReports = ['Monthly Staff Report', 'Quarterly Performance Report', 'Annual Finance Report'];
                if (englishReports[index]) link.textContent = englishReports[index];
            });
            document.querySelector('.footer p').textContent = '© 2024 KOMM e.V. All rights reserved.';
        } else {
            // Set back to German
            document.querySelector('h1').textContent = 'KOMM e.V. BI-Tool Dashboard';
            document.querySelectorAll('.sidebar a').forEach((link, index) => {
                const germanText = ['Dashboard', 'Berichte', 'Protokolle', 'Teams & Mitarbeiter', 'Benachrichtigungen', 'Einstellungen'];
                link.innerHTML = `<i class="${link.firstChild.className}"></i> ${germanText[index]}`;
            });
            document.querySelector('h2').textContent = 'Übersicht';
            document.querySelectorAll('h3').forEach((heading, index) => {
                const germanHeadings = ['Personalzahlen', 'Leistungskennzahlen', 'Auftragsanalysen'];
                if (germanHeadings[index]) heading.textContent = germanHeadings[index];
            });
            document.querySelector('label[for="team-filter"]').textContent = 'Filter nach Team:';
            document.querySelector('label[for="employee-filter"]').textContent = 'Filter nach Mitarbeiter:';
            document.querySelector('.button-new span').textContent = 'Filter zurücksetzen';
            document.querySelectorAll('.section.hidden ul li a').forEach((link, index) => {
                const germanReports = ['Monatsbericht Personal', 'Quartalsbericht Leistungen', 'Jahresbericht Finanzen'];
                if (germanReports[index]) link.textContent = germanReports[index];
            });
            document.querySelector('.footer p').textContent = '© 2024 KOMM e.V. Alle Rechte vorbehalten.';
        }
    }

    function updatePersonalzahlenImage() {
        const select = document.getElementById('quarter-select');
        const image = document.getElementById('personalzahlen-image');
        const quarter = select.value;
        image.src = quarter + ".png";
    }

    function setDefaultPersonalzahlen() {
        document.getElementById('quarter-select').value = '2024q3';
        updatePersonalzahlenImage();
    }

    function showPreviousContent() {
        const performanceContent = document.getElementById('performance-content');
        const orderContent = document.getElementById('order-content');
        performanceContent.classList.toggle('hidden');
        orderContent.classList.toggle('hidden');
    }

    function showNextContent() {
        const performanceContent = document.getElementById('performance-content');
        const orderContent = document.getElementById('order-content');
        performanceContent.classList.toggle('hidden');
        orderContent.classList.toggle('hidden');
    }

    function logout() {
        window.location.href = 'https://mustafabagci.com/kommev/login';
    }
</script>

</body>
</html>
